@model List<ProductModel>
@section Css{
    <link rel="stylesheet" href="//cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css">
}
@section Scripts{
    <script src="//cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
   @* <script>

        $('#myTable').DataTable({
            responsive: true
        });

    </script>*@

    <script>
        $('#deleteModel').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            var recipient = button.data('bsUserid')
            var modal = $(this)
            modal.find('#deleteInput').val(recipient)
        })
    </script>
}

@*<div class="row">
    <div class="col-md-12">
        <h1 class="h4 mt-3">Product List</h1>
        <hr>
        <a class="btn btn-primary btn-sm  mb-3" href="/admin/product/create">Create Product</a>
        <table id="myTable" class="table table-striped">
            <thead>
                <tr>
                    <td>Id</td>
                    <td>Name</td>
                    <td>Url</td>
                    <td>Price</td>
                    <td>Description</td>
                    <td>HomeImage</td>
                    <td>Stock</td>
                    <td>IsApprove</td>
                    <td>IsHome</td>
                    <td>ImageCount</td>
                    <td>CategoryCount</td>
                    <td style="width: 160px;"></td>
                </tr>
            </thead>
            <tbody>
                @if (Model.Count() > 0)
                {
                    @foreach (var item in Model)
                    {
                        <tr class="@(item.IsHome?"table-success":"") @(item.IsApprove?"":"table-warning")">
                            <td>@item.Id</td>
                            <td>@item.Name</td>
                            <td>@item.Url</td>
                            <td>@item.Price &#8378</td>
                            <td>@Html.Raw(@item.Description)</td>
                            <td><img src="~/img/@item.HomeImageUrl" height="50"></td>
                            <td>@item.Stock</td>
                            <td>@item.IsApprove</td>
                            <td>@item.IsHome</td>
                            <td>@item.Images.Count()</td>
                            <td>@item.ProductCategories.Count()</td>
                            <td>
                                <a href="/admin/user/@item.Id" class="btn btn-primary btn-sm mr-2">Edit</a>
                                <button type="button" class="btn btn-danger btn-sm" data-bs-userid="@item.Id" data-bs-toggle="modal" data-bs-target="#deleteModel">Delete</button>

                            </td>
                        </tr>
                    }
                }
                else
                {
                    <div class="alert alert-warning">
                        <h3>No Users</h3>
                    </div>
                }


            </tbody>
        </table>
    </div>
</div>*@

@await Html.PartialAsync("_areYouSureModel",new AreYouSureModel{
    ActionName="UserDelete",ControllerName="Admin",ParametreName="UserId"
})


<div class="container">
    <div class="row">
        <div class="col-2">
            @await Html.PartialAsync("_categories",(List<CategoryModel>)ViewBag.Categories)
            @await Html.PartialAsync("_search",(List<CategoryModel>)ViewBag.Categories)

        </div>
        <div class="col-10">
            <div class="row">
                <div class="mt-1 me-2 ms-2">
                    <table class="table table-light">
                        <thead>
                            <tr>
                                <td>Id</td>
                                <td>Name</td>
                                <td>Url</td>
                                <td>Price</td>
                                <td>Description</td>
                                <td>HomeImage</td>
                                <td>Stock</td>
                                <td>IsApprove</td>
                                <td>IsHome</td>
                                <td>ImageCount</td>
                                <td>CategoryCount</td>
                                <td style="width: 160px;"></td>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.Count() > 0)
                            {
                                @foreach (var item in Model)
                                {
                                    <tr class="@(item.IsHome?"table-success":"") @(item.IsApprove?"":"table-warning")">
                                        <td>@item.Id</td>
                                        <td>@item.Name</td>
                                        <td>@item.Url</td>
                                        <td>@item.Price &#8378</td>
                                        <td>@Html.Raw(@item.Description)</td>
                                        <td><img src="~/img/@item.HomeImageUrl" height="50"></td>
                                        <td>@item.Stock</td>
                                        <td>@item.IsApprove</td>
                                        <td>@item.IsHome</td>
                                        <td>@item.Images.Count()</td>
                                        @*<td>@item.ProductCategories.Count()</td>*@
                                        <td>
                                            <a href="/admin/user/@item.Id" class="btn btn-primary btn-sm mr-2">Edit</a>
                                            <button type="button" class="btn btn-danger btn-sm" data-bs-userid="@item.Id" data-bs-toggle="modal" data-bs-target="#deleteModel">Delete</button>

                                        </td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <div class="alert alert-warning">
                                    <h3>No Users</h3>
                                </div>
                            }

                        </tbody>
                    </table>


                </div>
            </div>

            @await Html.PartialAsync("_page",(PageInfo)@ViewBag.PageInfo)
        </div>






</div>
